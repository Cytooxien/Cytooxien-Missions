{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "Quest",
  "type": "object",
  "required": [
    "id"
  ],
  "properties": {
    "id": {
      "type": "string",
      "description": "Der Name der Quest muss innerhalb eines Bundles eindeutig sein."
    },
    "displayName": {
      "type": "string",
      "description": "Der Anzeigename der Quest"
    },
    "description": {
      "type": "string",
      "description": "Eine ausführlichere Beschreibung der Quest."
    },
    "stages": {
      "type": "array",
      "items": {
        "type": "object",
        "minItems": 1,
        "properties": {
          "objectives": {
            "type": "array",
            "minItems": 1,
            "items": {
              "$ref": "#/$defs/objective"
            }
          },
          "rewards": {
            "type": "array",
            "items": {
              "$ref": "#/$defs/reward"
            }
          }
        }
      }
    },
    "requirements": {
      "type": "array",
      "items": {
        "$ref": "#/$defs/requirement"
      }
    },
    "rewards": {
      "type": "array",
      "items": {
        "$ref": "#/$defs/reward"
      }
    },
    "options": {
      "type": "object",
      "description": "Optionale Einstellungen für die Mission",
      "properties": {
        "display": {
          "description": "Anzeige Item",
          "type": "string"
        },
        "bossBar": {
          "description": "Soll die BossBar während der Mission angezeigt werden",
          "type": "boolean"
        }
      }
    }
  },
  "$defs": {
    "reward": {
      "type": "object",
      "title": "Reward",
      "required": [
        "id",
        "type"
      ],
      "properties": {
        "id": {
          "type": "string",
          "description": "Name der Belohnung"
        },
        "displayName": {
          "type": "string",
          "description": "Optionaler Anzeigename"
        },
        "type": {
          "type": "string",
          "description": "Beschreibung des Handlers für die Implementierung",
          "enum": [
            "ItemStackReward",
            "TransactionReward"
          ]
        },
        "options": {
          "type": "object",
          "description": "Optionale Einstellungen abhängig von dem Reward Typ"
        }
      }
    },
    "requirement": {
      "type": "object",
      "title": "Requirement",
      "required": [
        "id",
        "type"
      ],
      "properties": {
        "id": {
          "type": "string",
          "description": "Eindeutige Id"
        },
        "displayName": {
          "type": "string",
          "description": "Optionaler Anzeigename"
        },
        "checkOnlyAtStart": {
          "type": "boolean",
          "description": "Soll die Voraussetzung nur beim start der Quest validiert werden."
        },
        "type": {
          "type": "string",
          "description": "Beschreibung des Handlers für die Implementierung",
          "enum": [
            "QuestCompletedRequirement",
            "AccessLevelRequirement"
          ]
        },
        "options": {
          "type": "object",
          "description": "Optionale Einstellungen abhängig von dem Requirement Typ"
        }
      }
    },
    "objective": {
      "type": "object",
      "title": "Objective",
      "required": [
        "id",
        "goal",
        "type"
      ],
      "properties": {
        "id": {
          "type": "string",
          "description": "Eindeutiger Name innerhalb einer Stage"
        },
        "displayName": {
          "type": "string",
          "description": "Optionaler Anzeigename der Aufgabe"
        },
        "goal": {
          "type": "integer",
          "description": "Der maximale Wert (Ziel), der erreicht werden kann."
        },
        "type": {
          "type": "string",
          "description": "Beschreibung des Handlers für die Implementierung",
          "enum": [
            "BreakBlockObjective",
            "PlaceBlockObjective",
            "KillEntityObjective",
            "BreedEntityObjective",
            "FishItemObjective",
            "HandInItemObjective",
            "TalkToNPCObjective",
            "ActionEventObjective",
            "CraftItemObjective"
          ]
        },
        "options": {
          "type": "object",
          "description": "Optionale Einstellungen abhängig von dem Objective Typ",
          "properties": {
            "display": {
              "description": "Anzeige Item",
              "type": "string"
            }
          }
        }
      }
    }
  }
}
